**SENG 637 - Dependability and Reliability of Software Systems**

**Lab. Report \#4 – Mutation Testing and Web app testing**

| Group: 16           |
|-------------------------------|
| Sayan                     |   
| Md Afif Al               |   
| Sutirtha                   |   
| Abhijit              |
| Moshfiq-Us-Saleheen  |

# Introduction

In this laboratory exercise, we split our focus into two main parts: mutation testing and GUI testing.

First up, we delved into mutation testing using the JFreeChart framework. Specifically, we concentrated on the Range and DataUtilities classes. Using tools like Eclipse, JUnit, and Pitest, we brought over the tests we developed earlier in assignment #3. With these tools, we introduced changes, known as mutants, into the code to see how well our tests could identify these alterations. Our main target was to enhance our tests to detect more of these mutants, ideally increasing our mutation score by at least 10%. However, we understood that achieving this might be challenging due to the nature of the mutants created by Pitest.

The second part of our exercise involved GUI testing with the Selenium tool. For this, we chose the Home Depot website as our testing ground. We approached this as if we were typical users looking to purchase or rent items from the site, which included tasks like creating a user account. We planned and executed a total of ten test scenarios using Selenium to interact with and test the website’s graphical user interface.

Overall, this lab was designed to provide hands-on experience with two critical areas of software testing: evaluating the thoroughness of unit tests through mutation testing and assessing user interface quality through GUI testing.

# Analysis of 10 Mutants of the Range class 

Based on the mutations and test methods described, here's how the analysis could look:

**Analysis of Mutation Testing for the Range Class:**

**Test 1: testConstrainAtBounds**
- **Method:** `constrain(double)`
- **Relevant Lines:** 
  - `constrain(double value)` at line 246.
- **Mutations:** 
  - "Incremented (++a) double local variable number 1" might not affect this method directly unless it alters boundary conditions.
  - "Negated conditional" mutations can reveal if boundary checks are effectively capturing all necessary conditions.
  - "Removed conditional - replaced comparison check with false" tests if out-of-range values are correctly constrained.

**Test 2: testCombineWithOverlappingRanges**
- **Method:** `combine(Range, Range)`
- **Relevant Lines:** 
  - `combine(Range range1, Range range2)` at line 318.
- **Mutations:** 
  - "Changed conditional boundary" might show whether overlapping ranges are correctly combined.
  - "Removed call to org/jfree/data/Range::getLowerBound and getUpperBound" can identify if the method fails when boundary methods are compromised.
  - "Mutated return of Object value for combine" tests the method's resilience against incorrect range calculations.

**Test 3: testExpandToIncludeNegativeValues**
- **Method:** `expandToInclude(Range, double)`
- **Relevant Lines:** 
  - `expandToInclude(Range range, double value)` at line 380.
- **Mutations:** 
  - "Decrementing (--) double local variable number 1" could show how negative values affect range expansion.
  - "Replaced return value with null" checks if null responses are correctly handled.

**Test 4: testLengthAfterExpandingRange**
- **Method:** `expandToInclude(Range, double)`
- **Relevant Lines:** 
  - `getLength()` at line 200.
- **Mutations:** 
  - "Replaced double subtraction with addition" might alter length calculations, affecting this test.
  - "Negated double field upper" could impact how expanded range lengths are calculated.

**Test 5: testExpandNegativeMargins**
- **Method:** `expand(Range, double, double)`
- **Relevant Lines:** 
  - `expand(Range range, double lowerMargin, double upperMargin)` at line 397.
- **Mutations:** 
  - "Incremented (++a) double local variable number 3" affects margin calculations, possibly preventing the range from shrinking as expected.

**Test 6: testShiftDoesNotAlterLength**
- **Method:** `shift(Range, double, boolean)`
- **Relevant Lines:** 
  - `shift(Range base, double delta, boolean allowZeroCrossing)` at line 439.
- **Mutations:** 
  - "Substituted 0 with -1" could reveal issues with negative shifts not altering length.
  - "Removed call to shiftWithNoZeroCrossing" examines if shifting respects the 'no zero crossing' constraint.

**Test 7: testCombineIgnoringNaNWithOneNaNRange**
- **Method:** `combineIgnoringNaN(Range, Range)`
- **Relevant Lines:** 
  - `combineIgnoringNaN(Range range1, Range range2)` at line 344.
- **Mutations:** 
  - "Negated double field lower" and "Replaced boolean return with false" test the method's ability to ignore NaN values properly.

**Test 8: testConstrainWithInfinity**
- **Method:** `constrain(double)`
- **Relevant Lines:** 
  - `constrain(double value)` at line 246.
- **Mutations:** 
  - "Substituted Double.POSITIVE_INFINITY with Double.MAX_VALUE" could test how infinity is handled, ensuring it's constrained within bounds.

**Test 9: testEqualsWithZeroLengthRange**
- **Method:** `equals(Object)`
- **Relevant Lines:** 
  - `equals(Object obj)` at line 502.
- **Mutations:** 
  - "Replaced return of boolean value with false" examines the method's ability to assess range equality, particularly for zero-length ranges correctly.

**Test 10: testToStringCorrectness**
- **Method:** `toString()`
- **Relevant Lines:** 
  - `toString()` at line 550.
- **Mutations:** 
  - "Replaced return value with the empty string for toString" checks if the range's string representation maintains correctness.

# Report all the statistics and the mutation score for each test class

# Analysis drawn on the effectiveness of each of the test classes

# A discussion on the effect of equivalent mutants on mutation score accuracy

# A discussion of what could have been done to improve the mutation score of the test suites

# Why do we need mutation testing? Advantages and disadvantages of mutation testing

Mutation testing is a way to check how good your tests are. Imagine you have a set of tests for your program. Mutation testing involves making small changes (mutations) to your program's code on purpose to create slightly wrong versions of it. Then, it runs your tests against these wrong versions. The idea is if your tests are good, they should fail because they've caught the mistakes. If the tests don't fail, it might mean they are not checking thoroughly enough.

### Advantages of Mutation Testing:

1. **Improves Test Quality**: It helps make sure your tests really are checking your code properly. By finding the parts of your code that aren't being tested well, you can write better tests.

2. **Finds Hidden Bugs**: Sometimes, it can catch mistakes in the code that were missed before because it forces the tests to look at the code in new ways.

3. **Better Code Understanding**: It can help developers understand their code better because they have to think about how changes affect the program.

### Disadvantages of Mutation Testing:

1. **Takes a Lot of Time**: Mutation testing can be very slow because it has to create a lot of wrong versions of your program and then test each one. This can take a lot longer than regular testing.

2. **Can Be Complicated**: Sometimes, the changes made during mutation testing are so small that they don't really affect anything, which can make interpreting the results tricky.

3. **Resource Intensive**: It uses a lot of computer power and memory, especially for large programs, which can be a problem if you don't have a lot of resources.

In simple terms, mutation testing can be a great way to make sure your tests are doing their job well, but it can take a lot of time and resources to do it.

# Selenium test case design process
Prior to initiating testing procedures, we conducted a thorough examination of the provided websites. We explored different functionalities of these websites. With a careful observation and exploration, we choose [Shop Smart Canada](https://shopsmartcanada.com/) as our System Under Test (SUT). Our rationale for selecting this particular website is as follows:

1. By the look of the website, we could tell it is an old website having potential existence of bugs making it a perfect test subject.
2. The website is built using PHP and follows a multi-page structure which makes it easier to imitate user interactions.
3. Additionally, we observed that other websites like [Home Depot](https://www.homedepot.ca/) dynamically generate DOM element IDs, rendering it more challenging to intercept the desired targets using Selenium.

With the SUT chosen, we compiled a list of functionalities to be tested or automated using Selenium IDE. Our emphasis was on the most frequently used features of the website. The outlined features are as follows:

- Login
- Searching with different queries
- Add or remove addresses
- Sorting products with different criteria
- Updating account information
- Adding or removing items from cart
- Creating and deleting wish list
- Adding or removing items from wish list
- Newsletter subscription

After defining the scenarios or functionalities, we created several test cases for each of the functionalities to be tested and analyze if they work as expected. For example, we expect a user can login with valid credentials but can not with an invalid one.

As the website requires authentication for different actions to be performed, we also created a test account with the following credentials and used it as required:
```
Email: vzz3wv0uf4@lettershield.com
Password: testPassword123
```
# Explain the use of assertions and checkpoints
In Selenium, assertions and checkpoints are essential for validating the behavior and the state of web elements or pages during test execution. We assert in different checkpoints to make sure everything is working as expected.

**Assertions:**
Assertions are statements that verify whether a certain condition is true or false. For example, we might assert that a certain element is present, has a specific text, or is enabled/disabled. If the assertion fails during test execution, it indicates a discrepancy between the expected and actual behavior. Quoting the Selenium documentation, there are 3 types of assertions.

>  **Assert:** If it fails, the test is stopped immediately.<br> **Verify:** If it fails, Selenium IDE logs this failure and continues with the test execution.<br>**WaitFor:** waitFor commands will first wait for a certain condition to become true.

In our testing, we used all of the assertion types.

**Checkpoints:**
Checkpoints are similar to assertions but often they are used to ensure that specific criteria are met at a particular point during test execution. For instance, you might use a checkpoint to verify the contents of a table, the presence of multiple elements on a page, or the state of a dynamic user interface component. If any of the checkpoint conditions are not met, the test execution may fail, indicating a deviation from the expected behavior.

A few examples are provided below from our generated test cases:

|Test functionality|Example of checkpoints|
|---------|----------------------|
|Login_Valid_Credentials|Asserts to the change in the header upon login or the alert message on incorrect credentials.|
|Login_Invalid_Credentials|Asserts to the alert message on incorrect credentials.|
|Account_Settings_Update_Phone_Number_Valid|Asserts text to verify if the setting is actually updated.|
|Account_Settings_Update_Phone_Number_Invalid|Asserts text to verify if the setting is actually updated.|
|Address_Valid_Data|Asserts to the new address title.|
|Address_Invalid_Data|Verifies the behaviour of the SUT whether it updates with invalid data or not.|
|Search_With_Valid_Query|Verifies the content on the page on valid search query|
|Search_With_Valid_Query|Asserts to "0 results for {query}" on invalid query.|
|Cart_Add_Item|Asserts to "Your Cart" when adding an item.|
|Cart_Remove_Item|Verifies to the text label "Your cart is empty" when everything is deleted from cart.|
|Newsletter_Subscribe_Valid|Upon subscription, asserts the confirmation text.|
|Newsletter_Subscribe_Invalid|Upon subscription attempt, asserts the error message.|
|Wish_List_Create_New_List|Asserts to list name when creation.|
|Wish_List_Delete_All_List|Asserts to text "You have no Wish Lists, add one now." when deleting all lists.| 
|Wish_List_Add_Item|Asserts to list name and waits for the added item to show up in the list.|
|Wish_List_Remove_Item|On item removal, also verifies the text - "Your Wish List is empty. When you add items to your Wish List they will appear here."|

Almost all functionalities under test also uses logout on which the test asserts or verifies to the text "You've been logged out of your account successfully."
# Testing functionality with different data
In total, we considered 9 features with 20 different inputs or test data. Whenever possible, or the test case allowed, we tested each test cases with different data. Our test cases also managed to find some existing bugs in the system. A brief table is provided with the different types of test data used.

|Test case|Test data/command|Expected|Actual|Decision|
|---------|---------|--------|------|--------|
|Login|Tested with valid credentials|Should log in|Logged in|Pass|
||Tested with invalid credentials|Should not log in and an error alert should be shown|Did not log in and an alert was shown|Pass|
|Account Settings - Update Phone Number|Valid phone number|Should update the number|Updated the number|Pass|
||Invalid phone number|Should not update the number|Updated the number|**Bug detected**|
|Search|Valid query item|Should show a list of items matching the query|Shows a list of query items|Pass|
||Invalid query item|Should not show any item but a zero response|Does not show any item but "(0) results"|Pass|
|Address - Add New Address|A valid Alberta address is provided|Should add the address|Added the address|Pass|
||An invalid address is provided|Should not add the address rather show an error message|Added the address|**Bug detected**|
|Cart|Add item to the cart|Should add the item to the cart|Added the item to the cart|Pass|
||Remove item from the cart|Should remove the item to the cart|Removed the item to the cart|Pass|
|Wish List - Creation/Deletion|Provide a wish list name to create|Should create a new wish list by the provided name|Creates the wish list|Pass|
||Remove an existing wish list|Should remove the wish list by the provided name|Removes the wish list|Pass|
|Wish List - Add/Remove Item|Add an item to a wish list|Should add the item to the wish list|Adds the item to the list|Pass|
||Remove an existing item from wish list|Should remove the item from the list|Removes the item from the list|Pass|
|Sort|Use alphabetical sorting|Should sort the items alphabetically|Sorts the item alphabetically|Pass|
||Use price-based sorting|Should sort the items by their price|Sorts the item by price|Pass|
||Use best-selling sorting|Should sort the items based on best selling|Sorts the item as expected|Pass|
||Use review-based sorting|Should sort the items based on reviews|No change is reflected in UI|**Bug detected**|
|Newsletter - Subscription|Use a valid email to subscribe|A confirmation message should be shown|Shows a confirmation message|Pass|
||Use an invalid email to subscribe|An error message should be shown|Shows an error message|Pass|

Although not expected but we were able to find a few bugs in the system. Additionally, we also believe the website is lacking some crucial features. For example, the website only provides an interface to subscribe to their newsletter but doesn't provide an option to unsubscribe.

# How the team work/effort was divided and managed

# Difficulties encountered, challenges overcome, and lessons learned

# Comments/feedback on the assignment itself
